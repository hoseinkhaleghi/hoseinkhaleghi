---
date: 2017-04-14T11:25:05-04:00
description: "Learn Next.js"
featured_image: "/images/esmeralda.jpg"
tags: []
title: "Chapter VI: Learn Next.js"
disable_share: false
---
1. Next.js چیست ؟
Next.js یک فریم‌ورک ری‌اکت برای ساخت وب‌سایت‌های ری‌اکت با امکانات اضافی است. این فریم‌ورک توسط شرکت Vercel توسعه داده شده و از ویژگی‌های مهم آن می‌توان به SSR (Server Side Rendering)، SSG (Static Site Generation)، API Routes و امکانات دیگر اشاره کرد.

از Next.js به دلایل زیر استفاده می‌شود:
1.Server Side Rendering(SSR):
Next.js اجازه می‌دهد تا صفحات وب را در سمت سرور رندر کنید و به کاربران ارسال کنید. این کار باعث بهبود سرعت بارگذاری و بهبود SEO و تجربه کاربری می‌شود.
رندر وبسایت سمت سرور به معنای پردازش و تولید صفحات وب در سمت سرور است. این فرآیند شامل ایجاد و ارسال HTML، CSS، JavaScript و دیگر منابع مورد نیاز برای نمایش یک صفحه وب به کاربر است. در زیر توضیحی از تاریخچه رندر وبسایت سمت سرور از گذشته تا کنون ارائه شده است:
1. دوران اولیه:
در دوران اولیه اینترنت، وبسایت‌ها به صورت استاتیک بودند و تنها شامل فایل‌های HTML بودند. این فایل‌ها توسط سرور به کاربر ارسال می‌شدند بدون هیچگونه پردازش دینامیک.
2. CGI (Common Gateway Interface):
CGI یک استاندارد برای ایجاد ارتباط بین وبسایت و برنامه‌های خارجی بود که در دهه ۱۹۹۰ معرفی شد. با استفاده از CGI، می‌توانستید برنامه‌های سمت سرور را اجرا کنید و خروجی آن‌ها را به عنوان صفحات HTML به کاربران ارسال کنید.

3. ASP (Active Server Pages) و PHP (Hypertext Preprocessor):
ASP و PHP دو زبان برنامه‌نویسی هستند که برای تولید صفحات دینامیک وبسایت‌ها استفاده می‌شوند. این زبان‌ها به شما امکان می‌دهند تا با استفاده از داده‌های پویا و پایگاه داده، صفحات HTML را به صورت دینامیک تولید کنید.

4. فریمورک‌های تحت سرور:
با پیشرفت تکنولوژی، فریمورک‌های تحت سرور مانند Laravel، Django، Ruby on Rails و ASP.NET MVC ظهور کردند. این فریمورک‌ها به برنامه‌نویسان امکان می‌دهند تا به سادگی و با کارایی بالا صفحات دینامیک را تولید کنند.
5. SSR (Server-Side Rendering) و SSR (Server-Side Rendering):
SSR یا Server-Side Rendering به معنای تولید صفحات وب در سمت سرور است و در این روش، تمام پردازش‌ها بر روی سرور انجام می‌شود و سپس صفحه HTML به کاربر ارسال می‌شود. در حالی که CSR یا Client-Side Rendering، پردازش‌ها بصورت کلاینت-ساید (در مروگر کاربر) انجام می‌شود.
6. Jamstack:
Jamstack یک رویکرد جدید برای توسعه وبسایت‌ها است که بخش زیادی از پردازش را به سمت سرور منتقل می‌کند. با استفاده از Jamstack، محتوای وبسایت‌ها به صورت استاتیک تولید می‌شود و سپس با استفاده از CDN (Content Delivery Network) به کاربران ارسال می‌شود.
با پیشرفت تکنولوژی، روش‌های رندر وبسایت سمت سرور نیز پیچیدگی بالاتر و عملکردهای پیشرفته‌تر را فراهم کرده است. امروزه، بسیاری از وبسایت‌ها از روش‌های پیشرفته رندر سمت سرور برای بهبود عملکرد و عملکردهای پویا استفاده می‌کنند.

2.Static Site Generation (SSG):
Next.js امکان تولید سایت‌های استاتیک را فراهم می‌کند که می‌تواند بهبود عملکرد و سرعت بارگذاری را بهبود بخشد.
Static Site Generation (SSG) یک روش برای تولید وب‌سایت‌های استاتیک است که در آن صفحات وب پیشازمانی می‌شوند و به عنوان فایل‌های HTML ثابت برای هر درخواست ارسال می‌شوند. این روش باعث بهبود سرعت بارگذاری وب‌سایت، بهبود عملکرد و کاهش هزینه‌های سرور می‌شود.
در Next.js، شما می‌توانید از ویژگی Static Site Generation برای تولید صفحات استاتیک استفاده کنید. برای این کار، شما می‌توانید از تابع getStaticProps در صفحات خود استفاده کنید. این تابع به شما امکان می‌دهد داده‌های مورد نیاز برای صفحه را پیشازمانی کنید و به عنوان خصوصیت props به صفحه ارسال کنید.
بعد از اینکه داده‌ها پیشازمانی شده و به صفحه ارسال شوند، Next.js صفحه را به یک فایل HTML استاتیک تبدیل می‌کند و آن را در فولدر out ذخیره می‌کند. این فایل HTML می‌تواند به عنوان یک فایل استاتیک برای هر درخواست ارسال شود.
با استفاده از Static Site Generation در Next.js، شما می‌توانید وب‌سایت‌های سریع و با عملکرد بالا را ایجاد کنید و از مزایای بهبود SEO و تجربه کاربری بهره مند شوید.

وبسایت های Static
وب‌سایت‌های استاتیک (Static Websites)، وب‌سایت‌هایی هستند که تمامی محتوا و اطلاعات آنها به صورت فایل‌های HTML، CSS، JavaScript و تصاویر در سرور ذخیره می‌شوند و در هنگام درخواست از سمت کاربر، فایل‌های استاتیک به صورت کامل برای کاربر ارسال می‌شوند. این فایل‌ها معمولاً پیشازمانی شده و ثابت هستند، بدون نیاز به داده‌های پویا یا پایگاه داده.
برخلاف وب‌سایت‌های پویا که هر بوقت کاربر یک صفحه را درخواست می‌دهد، داده‌ها را از پایگاه داده دریافت می‌کنند و سپس صفحه را پردازش می‌کنند، در وب‌سایت‌های استاتیک، صفحات به صورت پیشازمانی تولید شده و بسته به درخواست کاربر، فایل HTML مربوطه به او ارسال می‌شود.
مزایای وب‌سایت‌های استاتیک شامل سرعت بارگذاری بالا، امنیت بهتر، هزینه کمتر برای میزبانی و سادگی در مدیریت و نگهداری محتوا است. با این حال، برای وب‌سایت‌هایی که نیاز به داده‌های پویا و تغییرات مکرر دارند، استفاده از وب‌سایت‌های پویا مناسب‌تر است.
با استفاده از روش Static Site Generation (SSG) در فریمورک‌های مانند Next.js، می‌توانید به راحتی وب‌سایت‌های استاتیک با امکانات پویا و بهبود SEO ایجاد کنید.

getStaticPaths
تابع getStaticPaths یکی از دو توابع خاص در Next.js است که برای استفاده از Static Site Generation (SSG) استفاده می‌شود. این تابع به منظور تعریف مسیرهای استاتیک برای صفحه‌های وب‌سایت استفاده می‌شود.
وقتی یک صفحه در Next.js با استفاده از SSG ساخته می‌شود، نیاز است که مسیرهای استاتیک برای آن صفحه تعریف شوند. تابع getStaticPaths به عنوان یک تابع استاتیک در صفحه مورد نظر تعریف می‌شود و برای هر مسیر استاتیک، یک شیء که حاوی پارامترهای مورد نیاز است، برگردانده می‌شود.
در تابع getStaticPaths، شما باید یک شیء را با دو ویژگی اصلی تعریف کنید:
1. paths: یک آرایه از شیء‌های حاوی پارامترهای مورد نیاز برای هر مسیر استاتیک. این پارامترها ممکن است از روتین‌های داینامیک در URL یا اطلاعات دیگر برگرفته شده باشند.
2. fallback: یک مقدار بولین که مشخص می‌کند آیا Next.js باید صفحات استاتیک اضافی ایجاد کند یا خیر. اگر fallback برابر با true باشد، Next.js به صورت پویا صفحات جدید را بر اساس درخواست کاربر اضافه می‌کند.
به عنوان مثال، در کد قبلی، تابع getStaticPaths دو مسیر استاتیک برای صفحه محصولات با پارامترهای id=1 و id=2 تعریف کرده است و fallback را به true تنظیم کرده است. این به این معنی است که در صورت درخواست یک مسیر استاتیک جدید که تعریف نشده است، Next.js به صورت پویا آن را اضافه خواهد کرد.

getStaticProps
تابع getStaticProps یکی دیگر از دو تابع خاص در Next.js است که برای استفاده از Static Site Generation (SSG) استفاده می‌شود. این تابع برای دریافت داده‌های مورد نیاز برای ساخت صفحه‌ها با استفاده از SSG استفاده می‌شود.
وقتی یک صفحه در Next.js با استفاده از SSG ساخته می‌شود، نیاز است که داده‌های مورد نیاز برای آن صفحه به صورت استاتیک تعریف شوند. تابع getStaticProps به عنوان یک تابع استاتیک در صفحه مورد نظر تعریف می‌شود و داده‌های مورد نیاز برای ساخت صفحه را برگردانده می‌شود.
در تابع getStaticProps، شما باید یک شیء را با دو ویژگی اصلی تعریف کنید:
1. props: یک شیء که حاوی داده‌های مورد نیاز برای ساخت صفحه است. این داده‌ها ممکن است از API ها، پایگاه داده ها یا فایل های خارجی برگرفته شده باشند.
2. revalidate: یک عدد صحیح که نشان دهنده زمان (به ثانیه) است که Next.js باید منتظر بماند تا داده‌های جدید بروزرسانی شود. این کار به منظور بهبود عملکرد و سرعت بارگذاری صفحات است.
به عنوان مثال، در کد قبلی، تابع getStaticProps داده‌های مورد نیاز برای ساخت صفحه محصول با id=1 و id=2 را از یک منبع خارجی (مثلاً یک API) دریافت کرده و آن‌ها را به عنوان props برگردانده است. همچنین، revalidate به عنوان 10 ثانیه تنظیم شده است، به این معنی که Next.js هر 10 ثانیه چک می‌کند که آیا داده‌ها بروز شده‌اند یا خیر و در صورت لزوم صفحه را بروزرسانی می‌کند.
3.API Routes:
 Next.js به شما اجازه می‌دهد تا API های ساده را بسازید و مدیریت کنید که برای تعامل با پایگاه داده یا سرویس‌های خارجی مفید است.
تکمیلی از جاوا اسکریپت
async و await دو ویژگی جدید در جاوااسکریپت هستند که از ES6 (ECMAScript 2015) معرفی شدند و برای مدیریت کدهای ناهمزمان (asynchronous) بهبود آورده‌اند. این ویژگی‌ها به برنامه نویسان اجازه می‌دهند که کدهای ناهمزمان را به صورت همزمان و مشابه کدهای همزمان اجرا کنند، بدون نیاز به استفاده از callback ها یا Promise ها.
1. async: کلیدواژه async به تابع‌ها اجازه می‌دهد که یک Promise برگردانند. تابعی که با async تعریف شده است، همواره یک Promise برمی‌گرداند. این بدان معنی است که تابع async به صورت ناهمزمان اجرا می‌شود و ممکن است زمانی طول بکشد تا نتیجه آن برگردانده شود.
2. await: عبارت await فقط در تابع‌های async قابل استفاده است و موقع انتظار برای اتمام یک Promise استفاده می‌شود. با استفاده از await، می‌توانید منتظر شدن برای اتمام یک Promise را به صورت همزمان انجام دهید، بدون اینکه نیاز باشد به کدهای callback یا .then().
به عنوان مثال، در کد زیر، یک تابع async با نام getData تعریف شده است که یک Promise را با استفاده از await منتظر می‌ماند تا اجرا شود:

async function getData() {	
  let response = await fetch('https://api.example.com/data');
  let data = await response.json();
  return data;
}
getData().then(data => {
  console.log(data);
}).catch(error => {
  console.error(error);
});

4.Rapid development:
 Next.js فرآیند توسعه وب را ساده می‌کند و ابزارهای مفید برای تست، پیش‌نمایش و پیکربندی را فراهم می‌کند.
به طور کلی، Next.js یک فریم‌ورک قدرتمند است که به توسعه دهندگان وب امکانات بیشتری برای ساخت وب‌سایت‌های پویا و سریع فراهم می‌کند.


